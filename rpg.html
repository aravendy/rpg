<html>
<head>
    <link rel="stylesheet" href="casseBriques.css"/>
    <title>Casse_briques</title>
</head>
<body>
	
<canvas id="canvas" width="1280" height="640"></canvas>

<script >
(function () {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

var hero = {
        x: 360,
        y: 420,
        largeur: 32,
        hauteur: 48,
        imageSrc: 'guy.png'
    };


var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
var keys = [];

var mapImage=new Image();
mapImage.src="grass.png";
var heroImage=new Image();
heroImage.src="guy.png";

var xFrame = 0;
var yFrame = 0;
var xPicture = 0;

window.addEventListener("keydown", function (e) {
  keys[e.keyCode] = true;
});
window.addEventListener("keyup", function (e) {
   
        keys[e.keyCode] = false;
    
});

jeu();

function jeu(){
    
    gestionClavier();
    dessine();
    requestAnimationFrame(jeu);
}        

function dessine(){
        
        context.clearRect(0,0,canvas.width,canvas.height);
         
         for(var i=0;i<20;i++){
			  for(var j=0;j<10;j++){
         context.drawImage(mapImage,i*64,j*64,64 ,64 ); 
        }
	}
       
       /* if(!keys[39] && !keys[37] && !keys[40] && !keys[38]){
        context.drawImage(heroImage, 0 , 0 ,hero.largeur, hero.hauteur, hero.x, hero.y, hero.largeur, hero.hauteur);
	}
        if(keys[39] || keys[37] || keys[40] || keys[38]){
        */
        context.drawImage(heroImage, xFrame , yFrame ,hero.largeur, hero.hauteur, hero.x, hero.y, hero.largeur, hero.hauteur);
      if (keys[39] || keys[37] || keys[40] || keys[38]){ xPicture = xPicture + 16;}
        if(xPicture == 32 ){
        xFrame = xFrame + 32;
        xPicture = 0; 
	//}
        //xFrame = Math.floor(xPicture/32);
        if (xFrame == 128){
			    xFrame = 0;
			}
	
}      
      }   

function gestionClavier(){
            
            if(keys[39] ){
                hero.x+=5;
                yFrame = 96;
            } 
           
            if(keys[37] ){
                hero.x-=5;
                yFrame = 48;
            }
            if(keys[40] ){
                hero.y+=5;
                yFrame = 0;
            } 
           
            if(keys[38] ){
                hero.y-=5;
                yFrame = 144;
            }
          
           
            
        }  
    

	
	
 





</script>
</body>
</html>

